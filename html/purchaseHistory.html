<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kampech</title>
    <link rel="stylesheet" href="/styles.css">
    <link rel="icon" href="/Kumpech_logo_noText.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.6/jquery.inputmask.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
</head>

<body>
    <header>
        <div class="headerLeft">
            <a href="/index.html" class="nome_logo"><img src="/Kumpech_logo_noText.png" alt="logo" class="logo">
                <h1>Kampech</h1>
            </a>

        </div>
        <div class="headerRight">
            <input type="text" placeholder="Buscar.." class="searchBar" id="headerSearchBar">
            <button onclick="searchBar_slide()" class="searchButton">
                <img src="/searchIcon.svg" alt="searchIcon" class="searchIcon">
            </button>
            <a href="#" class="accountIcon" onclick="handleAuthenticationResponse()">
                <img src="/accountIcon.svg" alt="accountIcon">
            </a>
            <a href="/cart.html" class="cartIcon">
                <img src="/cartIcon.svg" alt="cartIcon">
            </a>
        </div>
    </header>

    <main class="purchaseHistory">
        <div class="purchase__container1">
            <a href="/index.html">
                <img class="purchase__container1__backButton" src="/back_button.png" alt="back_button">
            </a>
            <h1 class="purchase__container1__title">Meus Dados</h1>
        </div>
        <div class="purchase__buttons">
            <a href="/personalInfo.html" class="purchase__buttons__text">Dados Pessoais -</a>
            <a href="/purchaseHistory.html" class="purchase__buttons__text"><strong>Histórico de Compras</strong></a>
        </div>


        <div class="searchContainer">
            <button class="search-button">
                <img src="/searchIcon.svg" class="search-icon">
            </button>
            <button class="clearButton" onclick="clearSearchBar()">
                <img src="/xIcon.svg" class="xIcon">
            </button>
            <input type="text" placeholder="Pesquise aqui" class="searchBar" id="purchaseSearchBar">
        </div>
        <div class="purchase__history">
            <table class="purchaseTable">
                <tr class="purchaseTableRow">
                    <th class="purchaseTableHeader">Pedido</th>
                    <th class="purchaseTableHeader">Pagamento</th>
                    <th class="purchaseTableHeader">Data da compra</th>
                    <th class="purchaseTableHeader">Valor total</th>
                </tr>
            </table>
        </div>
    </main>

    <script src="/index.js"></script>
    <script>
        $.get('/getPurchaseHistory', function (data) {
            // Aqui você pode manipular os dados e atualizar a tabela
            const table = $('.purchaseTable');
            for (let i = 0; i < data.length; i++) {
                const row = $('<tr></tr>').addClass('purchaseTableRow');
                const cell1 = $('<td></td>').text(data[i].id_order).addClass('purchaseTableCell');
                const cell2 = $('<td></td>').text(data[i].payment).addClass('purchaseTableCell');
                const cell3 = $('<td></td>').text(moment(data[i].order_date).format('DD/MM/YYYY')).addClass('purchaseTableCell');
                const cell4 = $('<td></td>').text(data[i].total).addClass('purchaseTableCell');
                row.append(cell1, cell2, cell3, cell4);
                table.append(row);
            }
        });
    </script>
</body>

</html>